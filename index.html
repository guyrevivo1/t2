<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Loader</title>
<link href="https://fonts.googleapis.com/css2?family=Handjet&display=swap" rel="stylesheet">
<style>
html, body {
  margin:0; padding:0; height:100%; width:100%;
  display:flex; align-items:center; justify-content:center;
  overflow:hidden; font-family:Arial, sans-serif;
  background: linear-gradient(-45deg, #001F3F, #0059ff, #001F3F, #00aaff);
  background-size: 400% 400%;
  animation: gradientShift 10s ease infinite;
}
@keyframes gradientShift {
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

#loader {
  width:450px;
  max-width:100%;
  min-height:600px; /* גובה מינימום, מתגמש במסכים קטנים */
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  color:white;
  font-size:2.2rem;
}

.step {
  opacity:0;
  transition: opacity 0.8s ease, transform 0.8s ease;
  transform:translateY(6px);
}

.visible { opacity:1; transform:translateY(0); margin: 10px 0; }

#final-text {
  font-family:'Handjet',sans-serif;
  font-weight:700;
  font-size:2.7rem;
  opacity:0;
  transform:scale(0.9);
  color:#007bff;
  margin-top:15px;
}

#final-text.enter {
  opacity:1;
  animation:growIn 1.3s ease forwards;
}

#final-text.active {
  animation:colorBreath 2s ease-in-out infinite alternate;
}

@keyframes growIn {
  0%{transform:scale(0.9);opacity:0}
  60%{transform:scale(1.1);opacity:1}
  100%{transform:scale(1);opacity:1}
}

@keyframes colorBreath {
  0%{color:#007bff;transform:scale(1)}
  100%{color:#ffffff;transform:scale(1.07)}
}

@media (max-width:600px) {
  #loader { font-size:1.8rem; min-height:400px; }
  #final-text { font-size:1.7rem; }
}
</style>
</head>
<body>
<div id="loader">
  <div id="step1" class="step">טוען עיצוב...</div>
  <div id="step2" class="step">טוען טפסים...</div>
  <div id="step3" class="step">מארגן אתר...</div>
  <div id="final-text" class="step">MADE BY GUY&RAZ</div>
</div>

<script>
(function(){
  const steps = [
    document.getElementById("step1"),
    document.getElementById("step2"),
    document.getElementById("step3"),
    document.getElementById("final-text")
  ];
  const loader = document.getElementById("loader");
  const final = document.getElementById("final-text");
  let i=0;
  let siteLoaded = false;
  let breathCount = 0;

  function showStep(){
    if(i<steps.length-1){
      if(i>0) steps[i-1].classList.remove("visible");
      steps[i].classList.add("visible");
      i++;
      setTimeout(showStep,1200);
    } else {
      if(steps[i-1]) steps[i-1].classList.remove("visible");
      final.classList.add("enter");
      final.style.opacity = 1;
      breath(); // מתחילים נשימות
    }
  }

  function breath(){
    final.classList.add("active");
    breathCount++;
    setTimeout(()=>{
      if(siteLoaded && breathCount>=1){
        loader.style.transition='opacity 0.6s ease';
        loader.style.opacity='0';
        setTimeout(()=>loader.style.display='none',700);
      } else {
        breath(); // נשימה נוספת אם האתר עדיין לא נטען
      }
    },2000); // אורך נשימה אחת
  }

  showStep();

  window.addEventListener('load',()=>{
    siteLoaded = true;
  });
})();
</script>
</body>
</html>
